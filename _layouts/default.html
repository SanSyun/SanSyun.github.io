<!DOCTYPE html>
<html lang="en-us">

  {% include head.html %}

  <body class="modern-theme{% if site.background_image or page.background_image %} has-bg{% endif %}" {% if site.background_image or page.background_image %}style="--bg-url: url('{{ site.baseurl }}{% if page.background_image %}{{ page.background_image }}{% else %}{{ site.background_image }}{% endif %}');"{% endif %}>
    <div class="background-layer"></div>
    {% include sidebar.html %}

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead glass-effect">
        <div class="container">
          <h3 class="masthead-title">
            <a href="{{ site.baseurl }}/" title="Home">{{ site.title }}</a>
            <small>{{ site.tagline }}</small>
          </h3>
        </div>
      </div>

      <div class="container content-container">
        <div class="content glass-module">
          {{ content }}
        </div>
      </div>
    </div>

    <footer class="site-footer glass-effect">
      <div class="container">
        <p>&copy; {{ site.time | date: '%Y' }} {{ site.author.name }}.
        <p>Powered by <a href="https://jekyllrb.com/">Jekyll</a>.</p>
      </div>
    </footer>

    <style>
.modern-theme {
  min-height: 100vh;
  position: relative;
  background: linear-gradient(135deg, #f5f5f5 0%, #d8d8d8 100%);
  overflow: hidden;
}

.modern-theme.has-bg {
  background: transparent;
}

    .background-layer {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('{{ site.baseurl }}/images/bg-pattern.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      opacity: 1; /*背景图层透明度 */
      z-index: -2;
      pointer-events: none;
      transition: opacity 0.5s ease, filter 0.5s ease;
    }

    .modern-theme.has-bg .background-layer {
      background-image: var(--bg-url);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      opacity: 1;
    }

    .background-layer::before,
    .background-layer::after {
      content: '';
      position: absolute;
      inset: 0;
      pointer-events: none;
      transition: opacity 0.5s ease, filter 0.5s ease;
    }

    .background-layer::before {
      background: inherit;
      filter: blur(0);
      opacity: 1;
      transform: scale(1);
    }

    .background-layer::after {
      background: linear-gradient(135deg, rgba(255,255,255,0.4), rgba(240,240,240,0.55));
      opacity: 0;
    }

    .modern-theme.has-bg .background-layer::before {
      background-image: var(--bg-url);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: blur(22px);
      opacity: 0.95;
      transform: scale(1.08);
    }

    .modern-theme.has-bg .background-layer::after {
      background: rgba(255, 255, 255, 0.28);
      opacity: 1;
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    .wrap > .container.content-container {
      max-width: clamp(60rem, 90vw, 96rem) !important;
    }

    .glass-module {
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      padding: clamp(1.5rem, 4vw, 3rem);
      margin-bottom: 2rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .glass-module:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.15);
    }

    .masthead {
      position: sticky; 
      top: 0;
      padding: 1.25rem 0;
      margin-bottom: 3rem;
      /* z-index: 5; */
    }

.masthead-title {
  margin: 0;
  color: #1f1f1f;
}

    .masthead-title a {
      color: inherit;
      text-decoration: none;
    }

    .masthead small {
      font-size: 0.75em;
      opacity: 0.5;
      color: #1f1f1f;
    }

    .site-footer {
      padding: 1rem 0;
      text-align: center;
      margin-top: 3rem;
    }

    .content {
      position: relative;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .glass-module {
        padding: 1rem;
        margin: 1rem 0;
      }
      
      .masthead {
        margin-bottom: 1rem;
      }
    }

    /* Categories Page Styles */
    .post {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      transition: transform 0.3s ease;
    }

    .post:hover {
      transform: translateY(-3px);
    }

.post-title {
  margin-top: 0;
  color: #1f1f1f;
}

.post-date {
  color: #f1f1f1;
  font-size: 0.9em;
}
    </style>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
